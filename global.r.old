
load_or_install <-
  function(..., .packages = NULL)
  {
    if(!is.list(.packages))
      .packages <- as.list(.packages)

    .packages <-
      c(eval(substitute(alist(...))), .packages)

    install.counter <- 0

    for(pkg in .packages)
    {
      if(!is.character(pkg))
        pkg <- deparse(pkg)

      if(!require(pkg, character.only = TRUE))
      {
        install.packages(pkg, dependencies = TRUE)
        install.counter <- install.counter + 1
      }

      library(pkg, character.only = TRUE)
    }

    invisible(install.counter > 0)
  }

load_or_install(MASS, DT, dplyr, dtplyr, purrr, magrittr, stringr, openxlsx, lubridate, data.table, shiny, ggplot2, readr, rgdal, maptools, leaflet, mapview, rgeos)

